# HTTP/1.1(RFC 9112)

## HTTP消息格式  

HTTP消息是客户端和服务器之间进行通信的基本单位。HTTP/1.1协议中定义了两种类型的消息：

+ 请求消息

  由客户端发送给服务器，用于请求某个资源或执行某个操作；

+ 响应消息

  由服务器发送给客户端，用于返回请求结果或错误信息。

一个HTTP/1.1消息由以下几个部分组成，每个部分后跟一个CRLF（回车换行）：

1. 起始行

   包含请求方法或响应状态码、请求目标或响应原因短语以及HTTP版本号。


2. 头部字段

   头部字段包括一系列键值对，用于传递附加的元数据信息。头部字段可以分为四类：通用头字段、请求头字段、响应头字段和实体头字段。

3. 空行：无内容，表示头部字段结束的标志。

4. 消息体

   包含实际的数据内容，可以为空。在请求中，实体主体通常包含表单数据或上传文件等内容；在响应中，实体主体通常包含返回结果或错误信息等内容。

一个完整的HTTP/1.1消息示例：
```http
GET /index.html HTTP/1.1
Host: www.example.com
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/58.0.3029.110 Safari/537.36
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8

<html>
<head>
<title>Example Domain</title>
</head> 
<body>
<h1>Example Domain</h1>
</body>
</html>
```
## 请求行    

代表请求消息的请求行包括方法、URI和HTTP版本号，例如：

   ```http
   GET /index.html HTTP/1.1
   ```

+ 方法

  表示客户端希望服务器执行的操作。RFC 9110规定了：
  
  + GET：用于获取指定资源的表示形式。
  + POST：用于向服务器提交数据，并让服务器处理这些数据。
  + PUT：用于将指定资源替换为请求中提供的内容。
  + DELETE：用于删除指定资源。
  + OPTIONS：用于获取有关指定资源所支持的HTTP方法、允许使用哪些消息头字段等信息。
  + HEAD：与GET类似，但只返回响应头部分，不返回响应体部分。
  + CONNECT：用于建立隧道连接（如SSL加密流量），通常在使用代理时使用。
  + TRACE：用于追踪消息在传输过程中所经过的代理和网关等信息。
  
  > HTTP定义了多种请求方法，但在实际应用中很多方法使用频率相对较低，主要有以下原因：
  >
  > 1. 安全限制：许多网络安全防火墙和代理服务器只允许使用GET和POST请求方法，而其他请求方法则被视为潜在的安全风险。
  > 2. 浏览器限制：大多数浏览器对GET和POST请求方法进行了优化，而对于其他方法，浏览器的支持程度较低。
  > 3. RESTful风格：在RESTful API设计中，通常只使用GET、POST、PUT和DELETE方法来实现资源的增、删、改、查操作。这是由于RESTful API遵循了资源和动词的约定，而这四种方法正好可以对应资源的4种基本操作，因此成为了主要的请求方法。


+ URI

  表示客户端希望访问的资源。
    ```URI
    foo :// example.com:8042  /over/there  ?  name=ferret  #  nose
    \_/     \______________/  \_________/     \_________/     \__/
    scheme      authority         path 		   query 	  fragment
    ```
  
RFC 3986规范具体规定了URI的写法，总结为：
  
1. URI由多个组件组成，包括协议名、主机、路径、查询字符串、片段。
  
2. 每个组件都必须服从特定的编码规则，将一些字符转换为百分号开头的十六进制表示的ASCII码值。在JavaScript中，可以使用`encodeURIComponent()`函数对字符串进行URI编码。
  
   > 1. 协议部分： URI协议部分只能包含ASCII字符集中的字母和数字，因此不需要进行编码。
     > 2. 主机名部分： 主机名可以包含字母、数字和连字符（-），但不允许使用点（.）以外的其他特殊字符。如果主机名包含了非ASCII字符，需要使用punycode算法将其编码为ASCII字符集。
     > 3. 路径部分： URI路径部分可以包含字母、数字、连字符、点、下划线和波浪线（~），但是不允许使用其他特殊字符。需要将每个非ASCII字符使用百分号（%）进行编码，将其转换为十六进制表示的ASCII码值。
     > 4. 查询字符串部分： URI查询字符串部分可以包含字母、数字、连字符、点、下划线、波浪线和其他一些特殊字符，例如“/”，“？”和“&”。需要将每个非ASCII字符使用百分号进行编码，将其转换为十六进制表示的ASCII码值。特殊字符“/”，“？”和“&”也需要进行编码，以免被误解为URI语法的一部分。
     > 5. 片段部分： URI片段部分可以包含字母、数字、连字符、点、下划线、波浪线和其他一些特殊字符，例如“/”，“？”和“&”。需要将每个非ASCII字符使用百分号进行编码，将其转换为十六进制表示的ASCII码值。特殊字符“/”，“？”和“&”也需要进行编码，以免被误解为URI语法的一部分。
  
   
  
3. 查询字符串可以包含多组参数和值，每组参数和值之间用"="符号分隔，组与组用“&”分割。
  
4. 路径可以包含多个段（segment），每个段之间用"/"符号分隔。每个段可以包含多个子段（sub-segment），每个子段之间用";"符号分隔。
  
5. URI中的片段标识符（fragment identifier）用于指定资源内部的一个片段。片段标识符不会被发送到服务器端，仅在客户端内部使用。
  
+ HTTP版本号

  一般直接写为`HTTP/1.1`

## 状态行    

代表响应消息的状态行包括HTTP版本号、状态码和原因短语，例如：

   ```http
   HTTP/1.1 200 OK
   ```

响应消息中的状态行，包括HTTP版本号、状态码和原因短语等信息。 

## 消息头字段    

请求消息和响应消息中的各种头字段，如通用头字段、请求头字段、响应头字段和实体头字段等。 

## 消息体    

请求消息和响应消息中的实体主体部分，如POST请求中的表单数据或PUT请求中的文件内容等。 

## 连接管理    

HTTP/1.1协议中关于连接管理的规定，如持久连接、管道化连接和连接重用等。 

## 安全性考虑    

HTTP/1.1协议中关于安全性方面的规定，如HTTPS协议、身份验证和授权等。 

## 缓存机制 

## 代理服务器 

## 错误处理


```

```